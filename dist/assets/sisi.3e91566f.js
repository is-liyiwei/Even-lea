var e=(e,t,i)=>new Promise(((l,n)=>{var a=e=>{try{o(i.next(e))}catch(t){n(t)}},s=e=>{try{o(i.throw(e))}catch(t){n(t)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,s);o((i=i.apply(e,t)).next())}));import{g as t,i,p as l,f as n,R as a,I as s,r as o,o as r,c,j as u,F as h,h as d,t as m,k as p,J as g,w as f,l as v}from"./vendor.f8985853.js";import{h as w,b as y}from"./index.88fac234.js";var k=new class{constructor(e){this.name=e}static instance(e){return this.i=this.i||new this(e),this.i}get(){const e=localStorage.getItem(this.name);return JSON.parse(e)}set(e){return e=JSON.stringify(e),localStorage.setItem(this.name,e)}remove(){return localStorage.removeItem(this.name)}}("filterList");class b{constructor(e={}){this.reset(e)}updatePage(e=1){this.page+=e}updateLast(e=!1){this.last=e}updateFetching(e=!1){this.fetching=e}updateEpochFrom(e){this.epochFrom=e||0}updateEpochTo(e){this.epochTo=e||1e14}whetherFetch(){return this.fetching||this.last}reset(e={}){this.page=e.page||1,this.take=e.take||10,this.epochFrom=e.epochFrom||0,this.epochTo=e.epochTo||1e14,this.last=e.last||!1,this.fetching=e.fetching||!1,this.list=e.list||[],this.totalNum=e.totalNum||0,this.up=e.up||!0}}function x(e={},t={}){return w({url:"meipai",method:"delete",data:e,query:t})}const I={name:"sisi",components:{},setup(l,n){let o=t(new b),r=t(new b),c=i([]),u=i(!1),h=null;const d=()=>{h=g.service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})};function m(e,t){c.value=c.value.filter((t=>t.name!=e.name)),0==c.value.length&&window.location.reload(),document.title=e.name,window.scrollTo(0,0)}let p=t=>e(this,null,(function*(){yield function(e={},t={}){return w({url:"meipai",method:"get",data:e,query:t})}(null,{name:t.name}).then((e=>{let i=[];for(let l=0;l<e.list.length;l++){let n=e.list[l];n=y+"/"+t.name+"/"+n,i.push(n)}c.value.push({name:t.name,currList:i})}))})),f=(e=!0)=>{let t=k.get()||[];if(o.list=o.list.filter((e=>{for(let i=0;i<t.length;i++){if(t[i].name==e.name)return!1}return!0})),o.list=o.list.slice(0,15),e)for(let i=0;i<o.list.length;i++){const e=o.list[i];p(e)}},v=()=>{(function(e={},t={}){return w({url:"meipai/list",method:"get",data:e,query:t})})().then((e=>{o.list=e.list,f()}))};return v(),{pageList:o,pageList2:r,allView:c,filterItem:e=>{u.value=!0,d();let t=k.get()||[];t.push(e),k.set(t),m(e),h.close()},viewBigImage:e=>{s({images:[e],transition:"123"})},deleteMeipaiHandle:t=>e(this,null,(function*(){u.value=!0,d(),yield x({item:t}).then((e=>{m(t),h.close()}))})),getMeipaiHandle:p,filterData:f,getList:v,delPatch:()=>{u.value?alert("有过单个操作"):a.confirm("此操作将永久删除，包括当前页面过滤的，请再次确认, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){for(let e=0;e<c.value.length;e++){const t=c.value[e];d(),yield x({item:t}),h.close()}window.location.reload()})))).catch((()=>{}))}}}},C=f();l("data-v-69de7db2");const L={id:"sisi"},F=v("全部删除"),T={style:{width:"90%",color:"#fff","text-align":"center","background-color":"#f43134"},size:"mini",type:"text"},P={class:"top-ctrl"},S=v("删除"),_=v("过滤"),z=u("br",null,null,-1),B=u("br",null,null,-1);n();const N=C(((e,t,i,l,n,a)=>{const s=o("el-button");return r(),c("div",L,[u(s,{onClick:l.delPatch,size:"mini",type:"danger",class:"del-all"},{default:C((()=>[F])),_:1},8,["onClick"]),(r(!0),c(h,null,d(l.allView,((e,t)=>(r(),c("div",{key:t},[u("div",T,m(e.name),1),u("div",P,[0==t?(r(),c(s,{key:0,size:"mini",onClick:t=>l.deleteMeipaiHandle(e),type:"danger"},{default:C((()=>[S])),_:2},1032,["onClick"])):p("",!0),0==t?(r(),c(s,{key:1,size:"mini",onClick:t=>l.filterItem(e),type:"success"},{default:C((()=>[_])),_:2},1032,["onClick"])):p("",!0)]),z,B,(r(!0),c(h,null,d(e.currList,((e,t)=>(r(),c("img",{onClick:t=>l.viewBigImage(e),src:e,key:t,width:"150"},null,8,["onClick","src"])))),128))])))),128))])}));I.render=N,I.__scopeId="data-v-69de7db2";export default I;
